<!--DOCTYPE html>
<html lang="is">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="css_síða.css">
    <title>Verkefni7</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lobster+Two&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Bitter:wght@300&display=swap');
    </style>
</head>
<body>
    <header>
        <div id="container">
            <img src="myndir/tveirthridju.jfif" style="height: 100vh; width: 100%;">
            <div id="centered"><h1>2/3 Spisemændene og emil</h1></div>
        </div>
    </header>
    <main id="main">
        <section id="text">
            <h1>Hverjir eru 2/3 spisemændene</h1>
            <p><strong>,,2/3 spisemændene og emil"</strong> er íslenskur tónlistar hópur" stofnaður af þremur hálfvitum með garage band í 10. bekk. Stofnendur þrír voru vinirnir: <em>,,Einar Þór Sigurðsson"</em>, <em>,,Haldór Narfi Svafarsson"<em></em> og ,,Emil Snær Erlendsson". Nú í dag eru 5 meðlimir í hópnum og hafa bæst við ,,Friðrik Valur Bjartsson" og "Fannar Berg Skúlason".</p>
            <p>Í ár hafa drengirnir ekki gert frumsamið lag en hafa þeir verið að gera "cover" af vinsælum lögum. Hér er eitt af þeim "coverum"</p>
            <p>Þeir hafa eitt frumsamið lag sem heitir <em>Skór!</em> og var gert árið 2020 með garage band</p>
        </section>
        <section id="vid">
            <video width="100%" height= "100%" controls>
                <track label="English" kind="subtitles" srclang="en" src="captions.vtt" default>
                <source src="myndir/Emil Er Blindur.m4v">
            </video>
        </section>
        <section id="audio">
            <audio controls>
                <source src="myndir/Skór!.mp3">
            Vafrinn þinn styður ekki &lt;audio&gt; tagið.
            </audio>
            <p><em>Skór! lagið</em></p>
        </section>
    </main>
    <section id="litlet">
        <h1>Af hverju þessir litir og leturval</h1>
        <p>Þegar ég spurði Restina af hópnum hvað leturgerð okkar ætti að vera svöruðu þeir með lobster. Það eruppáhalds leturgerð okkar og við viljum sýna það. Síðan valdi ég bitter vegna þess það leit frekar vel út.</p>
        <p>Litirnir eru svona vegna mér fannst þetta líta ágætlega og það er einfalt að lesa texta</p>
    </section>

    <footer>
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1744.3107979884435!2d-21.959995283731445!3d64.07523698356304!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48d60cf432a771b3%3A0x93dc1cd7a832615f!2zVsOtw7Bpc3Rhw7Bhc2vDs2xp!5e0!3m2!1sen!2snl!4v1639350949530!5m2!1sen!2snl" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        <ul id="listi">
            <li>VEFÞ1VG05AU</li>
            <li>Einar Þór Sigurðsson</li>
            <li>einarthor2901@gmail.com</li>
        </ul>
        <ul id="verk">
            <li><a href="verkefni1">Verkefni 1</a></li>
            <li><a href="verkefni2">Verkefni 2</a></li>
            <li><a href="verkefni3">Verkefni 3</a></li>
            <li><a href="Verkefni4">Verkefni 4</a></li>
            <li><a href="verkefni5">Verkefni 5</a></li>
            <li><a href="verkefni6/verkefni6.html">Verkefni 6</a></li>
        </ul>

    </footer>
</body-->

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="tet.css">
    <title>poggi</title>
    </head>
<body>
    <canvas ></canvas>
<!--cript src="testapp.js"></script-->
<script>const canvas = document.querySelector('canvas');
    const ctx = canvas.getContext('2d');
    let width = canvas.width = window.innerWidth-4;
    let height = canvas.height = window.innerHeight-5;
    let score = 0;
    let up = false;
    let down = false;
    let left = false;
    let right = false;
    function random(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;}
    
    function pink() {
        return `rgb(${255},${192},${203})`
    }
    function cyan() {
        return `rgb(${0},${152},${122})`
    }
    function red() {
        return `rgb(${255},${0},${0})`
    }
    function orange() {
        return `rgb(${255},${165},${0})`
    }
    function blue() {
       return `rgb(${0},${0},${255})`
    }
    
    class Pellet {
       constructor(x,y,size){
          this.x = x;
          this.y = y;
          this.size = size;
          this.ate = false
          this.isInvincible = false
          this.invincibilityTimer= 1;
          this.isVisible = true;
          this.flashInterval = 500;
          this.flashTimer = setInterval(() => {
             this.togglePowerPelletVisibility();
          }, this.flashInterval);
       }
       draw() {
          ctx.beginPath();
          ctx.fillStyle = "yellow";
          ctx.arc(this.x,this.y,this.size,0,2*Math.PI);
          ctx.fill()  
          ctx.closePath();
       }
       pelletInvincibility() {
        if (!this.isInvincible) {
          this.isInvincible = true;
          clearTimeout(this.invincibilityTimer);
          this.invincibilityTimer = setTimeout(() => {
            this.isInvincible = false;
          }, 1000);}
        }
        togglePowerPelletVisibility() {
          this.isVisible = !this.isVisible;
       }
       clearFlashInterval() {
          clearInterval(this.flashTimer);
       }
        collisionDetect() {
          if (this !== pacdude) {
            const dx = this.x - pacdude.x;
            const dy = this.y - pacdude.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < this.size + pacdude.size) {
              if (!this.isInvincible) {
                console.log("Pacman ate a pellet!");
                this.ate = true;
                this.pelletInvincibility();
                pacdude.activatePowerMode();
              }
            }
          }
        }
    }
    
    class Pacdude {
       constructor(x,y,velX,velY,size){
          this.x = x;
          this.y = y;
          this.velX = velX;
          this.velY = velY;
          this.size = size;
          this.rotation = 0
          this.lives = 3;
          this.killmonger = false;
          this.killTimer = 0;
          this.isinvincible = false;
          this.invincibilityTimer = 0; 
       }
       draw(){
          const ang = Math.PI / 180;
          ctx.save();
            ctx.translate(this.x,this.y);
            ctx.rotate(this.rotation)
            ctx.translate(-this.x,-this.y);
            ctx.beginPath();
            ctx.fillStyle = "#fffb00";
            ctx.arc(this.x, this.y, this.size,ang*30,ang*330,false);
            ctx.lineTo(this.x,this.y);
            ctx.fill();
            ctx.closePath();
            ctx.restore()
       }
       update() {
          if ((this.x + this.size) >= width) {
             this.x=width-60;
          }
          if ((this.x - this.size) <= 0) {
             this.x = 60;
          }
          if ((this.y + this.size) >= height) {
             this.y = height-60;
          }
          if ((this.y - this.size) <= 0) {
             this.y = 60
          }
          if(up == true){
             pacdude.rotation = (270 * Math.PI / 180);
             pacdude.y -= pacdude.velY;
         }
         else if(down == true){
             pacdude.rotation = (90 * Math.PI / 180)
             pacdude.y += pacdude.velY;
         }
         if(left == true){
             pacdude.rotation = (180 * Math.PI / 180)
             pacdude.x -= pacdude.velX;
         }
         if(right == true){
             pacdude.rotation = 0
             pacdude.x += pacdude.velX;
         }
       }
        activateInvincibility() {
            if (!this.isInvincible) {
              this.isInvincible = true;
              clearTimeout(this.invincibilityTimer);
              this.invincibilityTimer = setTimeout(() => {
                this.isInvincible = false;
              }, 2000);
            }
        }
        activatePowerMode() {
          if (!this.killmonger) {
            this.killmonger = true;
            clearTimeout(this.killTimer);
            this.killTimer = setTimeout(() => {
              this.killmonger = false;
            }, 5000);
          }
       }
       collisionDetectPellets(pellets) {
          for (const pellet of pellets) {
             if (pellet.ate == false) {
                const dx = this.x - pellet.x;
                const dy = this.y - pellet.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
    
                if (distance < this.size + pellet.size) {
                   pellet.ate = true;
                   this.activatePowerMode();
                   pellet.isVisible = false;
                }
             }
          }
       }
       collisionDetectGhosts(ghosts) {
          for (const ghost of ghosts) {
             if (ghost.ate == false) {
             if (!(this == ghost)) {
                const dx = this.x - ghost.x;
                const dy = this.y - ghost.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
    
                if (distance < this.size + ghost.size) {
                   if (!pacdude.killmonger) {
                      if (!pacdude.isInvincible) {
                         pacdude.lives--;
                         pacdude.activateInvincibility();
                      }
                      if (pacdude.lives == 0) {
                         location.reload();
                      }
                   } else {
                      ghost.ate = true;
                   }
                }
             }
          }
       }}
       collisionDetectDots(normalPills) {
          for (const dot of normalPills) {
             if (!dot.ate) {
                const dx = this.x - dot.x;
                const dy = this.y - dot.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < this.size + dot.size) {
                   dot.ate = true;
                   score++;
                }
                if (score === 50){
                   alert("vannst");
                   location.reload();
                }
             }
          }
       }
       collisionDetect() {
          this.collisionDetectPellets(pellets);
          this.collisionDetectGhosts(ghosts);
          this.collisionDetectDots(normalPills);
       }
       
    }
    class Ghosts {
       constructor(x, y, velX, velY, color, size) {
          this.x = x;
          this.y = y;
          this.velX = velX;
          this.velY = velY;
          this.color = color;
          this.size = size;
          this.ate = false;
       }
       draw() {
          ctx.beginPath();
          if (!pacdude.killmonger){
          ctx.fillStyle = this.color;}
          else {ctx.fillStyle = blue()}
          ctx.arc(this.x, this.y, this.size, 0, 2 * Math.PI);
          ctx.fill();
          ctx.closePath();
       }
       update() {
        console.log(pacdude.lives)
          if ((this.x + this.size) >= width) {
             this.velX = -(Math.abs(this.velX));
          }
    
          if ((this.x - this.size) <= 0) {
             this.velX = Math.abs(this.velX);
          }
    
          if ((this.y + this.size) >= height) {
             this.velY = -(Math.abs(this.velY));
          }
    
          if ((this.y - this.size) <= 0) {
             this.velY = Math.abs(this.velY);
          }
    
          this.x += this.velX;
          this.y += this.velY;
       }
    }
    const pacdude = new Pacdude(30,80,4,4,40);
    let ghosts = [];
    let pellets = [];
    let normalPills = [];
    function init(){
       normalPills = [];
       function createSmallDots(numdots) {
          for (let i = 0; i < numdots; i++) {
             const x = random(10, width-10);
             const y = random(10, height-10);
             const size = 2; // Adjust the size as needed
             let ate = false;
             normalPills.push({x, y, size, ate}); 
          }
       }
       createSmallDots(50);
       ghosts = [];
       pellets = [];
       const size = random(20,30)
    const inky = new Ghosts(
        random(0 + size,width - size),
          random(0 + size,height - size),
          5,
          5,
          cyan(),
          25
    )
    ghosts.push(inky)
    const blinky = new Ghosts(
        random(0 + size,width - size),
          random(0 + size,height - size),
          5,
          5,
          red(),
          25
    )
    ghosts.push(blinky)
    const pinky = new Ghosts(
        random(0 + size,width - size),
          random(0 + size,height - size),
          5,
          5,
          pink(),
          25
    )
    ghosts.push(pinky)
    const clyde = new Ghosts(
        random(0 + size,width - size),
        random(0 + size,height - size),
          5,
          5,
          orange(),
          25
    )
    ghosts.push(clyde)
    const pellet1 = new Pellet(
        width-30,
       height-30,
       15,
    );
    pellets.push(pellet1);
    const pellet2 = new Pellet(
       width-30,
       height-(height-30),
       15,
    );
    pellets.push(pellet2)
    const pellet3 = new Pellet(
        30,
        30, 
        15,
    );
    pellets.push(pellet3);
    const pellet4 = new Pellet(
       30,
       height-30,
       15,
    );
    pellets.push(pellet4);
    }
    function loop() {
    
       ctx.fillStyle = 'rgba(0, 0, 0, 0.25)';
       ctx.fillRect(0, 0,  width, height);
       for (const ghost of ghosts) {
          if (!ghost.ate){
             ghost.draw();
             ghost.update();
          }
    }
       for (const pellet of pellets) {
           if (pellet.ate == false){
                if(pellet.isVisible){
                   pellet.draw();}
            } else {
                ctx.clearRect(this.x,this.y,this.size,0,2*Math.PI) 
            }
       }
       for (const dot of normalPills) {
          if (!dot.ate){
             ctx.beginPath();
             ctx.fillStyle = "yellow";
             ctx.arc(dot.x, dot.y, dot.size, 0, 2 * Math.PI);
             ctx.fill();
             ctx.closePath();}
       }
       pacdude.draw();
       pacdude.update();
       pacdude.collisionDetect();
       ctx.fillStyle = 'white'; 
       ctx.font = '24px Arial'; 
       ctx.fillText('stig: ' + score, 80, 30); 
       ctx.fillText('líf: ' + pacdude.lives, 80, 50)
       requestAnimationFrame(loop);
    };
    window.addEventListener("load", loop);
    window.addEventListener('keydown', (e) => {
       let key = e.key
       switch(key) {
           case 'W':
           case 'w':
               up = true;
               break;
           case 's':
           case 'S':
               down = true;
               break;
           case 'a':
           case 'A':
               left = true;
               break;
           case 'd':
           case 'D':
               right = true;
               break;
    }})
    window.addEventListener('keyup', (e) => {
    let key = e.key
    switch(key) {
          case 'W':
          case 'w':
             up = false;
             break;
          case 's':
          case 'S':
             down = false;
             break;
          case 'a':
          case 'A':
             left = false;
             break;
          case 'd':
          case 'D':
             right = false;
             break;
    }});
    window.addEventListener('resize', function(){
       width = canvas.width = window.innerWidth-4;
       height = canvas.height = window.innerHeight-5;
       init();
    })
    init();</script>
</body>
</html>
